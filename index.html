<!DOCTYPE html>
<html lang="ru"><head>
  <meta charset="utf-8" />
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><![endif]-->
  <title>Лабораторная работа 5</title>
  <link rel="stylesheet" href="https://www.x3dom.org/download/x3dom.css" />
  <script src="https://www.x3dom.org/download/dev/x3dom-full.js"></script>
  <script src="anim-1.js"></script>
  <script src="anim.js"></script>


</head>

			 
<input type="submit" value="Вернуть мяч в центр" onclick="func1()">	     <!--Кнопка "Вернуть мяч в центр", при клике обращается к функции func1-->
<input type="submit" value="Забросить мяч в кольцо" onclick="func2()">	 <!--Кнопка "Забросить мяч в кольцо", при клике обращается к функции func2 и тд-->
<input type="submit" value="Сменить ракурс" onclick="func3()">
<input type="submit" value="Бросить мяч самому" onclick="func4()">	
<input type="submit" value="Поставить паузу" onclick="func5()">		

<h1>Пляжный баскетбол</h1>
<X3D style="width:900px; height:600px">

  <scene>

    <transform translation="0 0 0" rotation = "1 0 0 0.52">
    <Inline url= "Umbrella.x3d"></Inline>
    <DirectionalLight ambientIntensity ="1" color = "1 1 1" location = "10 50 0" radius = "100" intensity = "1" shadowIntensity= "0.1" shadowMapSize= "4024"></DirectionalLight>
	<Viewpoint CenterCfRotation = "0 0 0" position = "0 2 10" orientation = "1 0 0 -0.2" id = "view"></Viewpoint>
	 
<Collision DEF = "Scene" enabled = "true"> 
	<!--.....................Сцена - пляжный баскетбол...............................................................-->	

<transform render = 'false' translation= "2 0 0" id = "scene1">
<Group DEF = "scene1">
	
<!--.....................Баскетбольное кольцо 1...............................................................-->	 
<Group DEF = "Ring">
	<transform translation="8 1.25 10">
        <shape>
          <appearance>
            <material diffuseColor="0.5 0.2 0.1"></material>
          </appearance>
          <cylinder height="2.5" radius="0.03" ></cylinder>
        </shape>
      </transform>
	
	  <transform translation="8 2.25 9.98" rotation = "1 0 0 1.57"> 
        <shape>
          <appearance>
            <ImageTexture url ="bask1.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <box size="0.65 0.05 0.5"></box>
        </shape>
      </transform>
	

	<transform translation="8 2.25 9.80" rotation = "1 0 0 1.57">
        <shape>
          <appearance>
            <ImageTexture url ="bask2.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <torus innerRadius="0.01" outerRadius="0.18"></torus>
        </shape>
    </transform>
</Group>	
	
<!--.....................Баскетбольное кольцо 2...............................................................-->	 
<Group DEF = "Ring2"> 
	<transform translation="8 1.25 0">
        <shape>
          <appearance>
            <material diffuseColor="0.5 0.2 0.1"></material>
          </appearance>
          <cylinder height="2.5" radius="0.03" ></cylinder>
        </shape>
      </transform>
	
	  <transform translation="8 2.25 0.02" rotation = "1 0 0 1.57"> 
        <shape>
          <appearance>
            <ImageTexture url ="bask1.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <box size="0.65 0.05 0.5"></box>
        </shape>
      </transform>
	

	<transform translation="8 2.25 0.2" rotation = "1 0 0 1.57">
        <shape>
          <appearance>
            <ImageTexture url ="bask2.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <torus innerRadius="0.01" outerRadius="0.18"></torus>
        </shape>
    </transform>
</Group>
	
	
<!--......................Баскетбольное поле...............................................................-->	
<Transform translation="3 0.02 10" rotation = "0 1 0 1.57">
    <Shape>
      <Appearance>
              <ImageTexture url="pole.jpg"></ImageTexture>
            </Appearance>
          <ElevationGrid xDimension="2" zDimension="2" 
                          height=
                                  "0, 0,   
                                   0, 0"
                  xSpacing="10" zSpacing="10" solid="false">
          </ElevationGrid>
        </Shape>
   </Transform>
</Group>
	
<!--......................Баскетбольный мяч...............................................................-->	 
	
	 <transform DEF = "BascBall" translation="8 0.15 5" id = "BascBall">
        <shape>
          <appearance>
            <ImageTexture url ="ball.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <sphere radius = "0.15"></sphere>
        </shape>
     </transform>
	

	

	


	</transform>
<!--......................................................................................................-->	 	
	
      <transform translation="0 0 0" rotation = "1 0 0 1.57">
        <shape>
          <appearance>
            <TextureTransform scale="3 3"></TextureTransform>
            <ImageTexture url ="https://st2.depositphotos.com/1000848/9925/i/950/depositphotos_99255906-stock-photo-texture-of-tile-seamless-background.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <box size="5 5 0.2"></box>
        </shape>
      </transform>

      <transform translation="0 0.11 0" rotation = "1 0 0 1.57">
        <shape>
          <appearance>
            <ImageTexture url ="https://avatanplus.com/files/resources/mid/587a620bcfa8e1599e0efe4b.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <box size="4 4 0"></box>
        </shape>
      </transform>
<!--.....................Круг в бассейне............................................................................................-->
   <transform DEF = "Tor" rotation = "1 0 0 -1.57">  
	<transform translation="0 0.11 0" rotation = "1 0 0 1.57">
        <shape>
          <appearance>
            <TextureTransform scale="2 1"></TextureTransform>
            <ImageTexture url ="https://st2.depositphotos.com/5483924/8223/v/450/depositphotos_82237332-stock-illustration-cake-glaze-colorful-seamless-pattern.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <torus innerRadius="0.2" outerRadius="0.5"></torus>
        </shape>
      </transform>
     </transform>
	
	
       <transform DEF = "Ball" translation="1.3 0.15 0">
        <shape>
          <appearance>
            <material diffuseColor="2.56 0.3 0.4"></material>
          </appearance>
          <sphere radius = "0.25"></sphere>
        </shape>
        </transform>

      <transform translation="-2.3 0.8 -1.5">
        <shape>
          <appearance>
            <material diffuseColor="0.59 0.26 0.19"></material>
          </appearance>
          <cylinder height="1.5" radius="0.03" ></cylinder>
        </shape>
      </transform>

      <transform translation="-2.3 1.5 -1.5">
        <shape>
          <appearance>
            <TextureTransform scale="10 10"></TextureTransform>
            <ImageTexture url ="https://st.depositphotos.com/2152431/3563/i/450/depositphotos_35634319-stock-photo-straw-background-basket-weave-texture.jpg" repeatS="True" repeatT="True"></ImageTexture>
          </appearance>
          <cone bottom="True" bottomRadius="1" height="0.7"></cone>
        </shape>
      </transform>

      <transform translation="0 0.12 2.3" rotation="1 0 0 4.71">
        <shape>
          <appearance>
            <material diffuseColor="0 0 0"></material>
          </appearance>
          <text string="Open from 9AM" solid="false" >
            <fontstyle size = "0.5"></fontstyle>
          </text>
        </shape>
      </transform>

     <shape>
          <pointset>
        <Color color="0 0 0, 0 0 0, 0 0 0"></Color>
        <Coordinate point="1.8 0.12 2.35, 1.85 0.12 2.35, 1.9 0.12 2.35"></Coordinate>
          </pointset>
        </shape>
    
    <shape>
      <IndexedFaceSet ccw="true" colorPerVertex="true" convex="true"
              creaseAngle="0" solid="false"
              coordIndex="0 4 7 3 -1 
                    5 6 2 1 -1 
                    4 5 6 7 -1 
                    6 7 3 2 -1
                    0 4 5 1 -1
                    0 1 2 3 -1"
              colorIndex="0 1 2 3 -1 
                    4 5 6 0 -1 
                    1 2 3 4 -1 
                    5 6 0 1 -1
                    3 2 1 0 -1
                    4 6 2 0 -1">
        <Coordinate point="2 0.5 -1, 2.2 0.5 -1, 2.2 0.5 -1.5, 2 0.5 -1.5, 
                   2 0 -1, 2.2 0 -1, 2.2 0 -1.5, 2 0 -1.5"></Coordinate>
        <Color color="1 1 1, 0 1 1, 0 1 1, 0 0 1, 0 0 1, 0 1 1, 1 1 1"></Color></IndexedFaceSet>
    </shape>
    
    <shape>
      <IndexedFaceSet ccw="true" colorPerVertex="true" convex="true"
              creaseAngle="0" solid="false"
              coordIndex="0 4 7 3 -1 
                    5 6 2 1 -1 
                    4 5 6 7 -1 
                    6 7 3 2 -1
                    0 4 5 1 -1
                    0 1 2 3 -1"
              colorIndex="0 1 2 3 -1 
                    4 5 6 0 -1 
                    1 2 3 4 -1 
                    5 6 0 1 -1
                    3 2 1 0 -1
                    4 6 2 0 -1">
        <Coordinate point="1 0.6 -1, 2.2 0.6 -1, 2.2 0.6 -1.5, 1 0.6 -1.5, 
                   1 0.5 -1, 2.2 0.5 -1, 2.2 0.5 -1.5, 1 0.5 -1.5"></Coordinate>
        <Color color="1 1 1, 0 1 1, 0 1 1, 0 0 1, 0 0 1, 0 1 1, 1 1 1"></Color></IndexedFaceSet>
    </shape>
    

    <Transform translation="-5 0 -5">
    <Shape>
      <Appearance>
              <ImageTexture url="pesok.jpeg"></ImageTexture>
            </Appearance>
          <ElevationGrid xDimension="4" zDimension="3" 
                          height=
                                  "0, 0, 0, 0,   
                                   0, 0, 0, 0,
								   0, 0, 0, 0"
                  xSpacing="10" zSpacing="10" solid="false">
          </ElevationGrid>
        </Shape>
    </Transform>
<!--.....................Прозрачная стена............................................................................................-->   
    <Transform translation="-1.57 1 -2.51" rotation="1 0 0 1.57">
      <shape>
        <IndexedTriangleStripSet index="0 1 2 3 4 5 -1" solid="false">
          <Coordinate point="0 0 1, -1 0 1, 4.1 0 1, -1 0 0, 4.1 0 0, 4.1 0 0 "></Coordinate>
          <ColorRGBA color="0.8 0 1, 0 1 1 1, 1 0 0 1, 1 0.5 0 1, 0.8 0 1 1, 1 1 0 1, 0.6 0.3 0.1 1, 1 0 0.5 1, 0 1 0.5 1"></ColorRGBA>
        </IndexedTriangleStripSet>
      </shape>
    </Transform>
		   
<!--.....................МЯЧ............................................................................................--> 		   
	<transform DEF = "Ball1" translation="1 0.2 0" id = "ball">
      <shape USE ="Ball"></shape>
    </transform>
 </Collision>
		
		
<!--.....................АНИМАЦИЯ МЯЧА............................................................................................-->
		
        <TimeSensor DEF="TS_Ball" cycleInterval="2" loop="true"></TimeSensor>
        <PositionInterpolator DEF="PI_Ball" key="0, 0.2, 0.4, 0.6, 0.8, 1 " keyValue="1 0.2 0 , 1 0.6 0, 1 0.8 0, 1 1 0, 1 0.8 0, 1 0.2 0 "></PositionInterpolator>
		<ROUTE fromNode="TS_Ball" fromField="fraction_changed"
               toNode="PI_Ball" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="PI_Ball" fromField="value_changed"
               toNode="Ball1" toField="translation">
        </ROUTE>
		
		<!--.....................АНИМАЦИЯ МЯЧА2............................................................................................-->
		
		<TimeSensor DEF="TS_Ball2" cycleInterval="2" loop="true"></TimeSensor>
        <PositionInterpolator DEF="PI_Ball2" key="0, 0.1, 0.5, 1 " keyValue="1 1 1, 1 0.6 1 , 1 0.9 1, 1 1 1"></PositionInterpolator>
		<ROUTE fromNode="TS_Ball2" fromField="fraction_changed"
               toNode="PI_Ball2" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="PI_Ball2" fromField="value_changed"
               toNode="Ball1" toField="set_scale">
        </ROUTE>
		
<!--.....................АНИМАЦИЯ Тора............................................................................................-->	
		<TimeSensor DEF="TS_Tor" cycleInterval="2" loop="true"></TimeSensor>
        <OrientationInterpolator DEF="OI_Tor" key="0, 0.5, 1 " keyValue="0 0 1 0, 0 0 1 0.1, 0 0 1 0"></OrientationInterpolator>
		<ROUTE fromNode="TS_Tor" fromField="fraction_changed"
               toNode="OI_Tor" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="OI_Tor" fromField="value_changed"
               toNode="Tor" toField="set_rotation">
        </ROUTE>
		
<!--.....................АНИМАЦИЯ БАСКЕТБОЛЬНОГО МЯЧА............................................................................................-->
		 <TimeSensor DEF="TS_BascBall" cycleInterval="1" loop="true" ></TimeSensor>
        <PositionInterpolator DEF="PI_BascBall" id = "ballanim"  key="0, 0.2, 0.4, 0.6, 1 " keyValue="8 0.15 5 , 8 0.5 5, 8 0.7 5, 8 0.6 5, 8 0.15 5 "></PositionInterpolator>
		<ROUTE fromNode="TS_BascBall" fromField="fraction_changed"
               toNode="PI_BascBall" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="PI_BascBall" fromField="value_changed"
               toNode="BascBall" toField="translation">
        </ROUTE>
		

 
  </transform>

  </scene>
</x3d>
<body>


	
</body>
</html>

